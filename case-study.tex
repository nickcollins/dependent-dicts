%% \subsection{Practical Importance}
%% \label{sec:Problem:pract}
\section{Case Study}
\label{sec:CaseStudy}

\input{fig-testbench}

To illustrate the practical importance of the four core properties, we consider a simply-typed lambda calculus
augmented with an \texttt{assert} operator -- see \autoref{fig:testbench}.
\texttt{assert} takes two arguments; if their evaluation results are exactly equal, \texttt{assert} evaluates to the first,
otherwise it evaluates to an \texttt{Err} result. We wish to define an environment-based (as opposed to substitution-based)
evaluation judgment, and prove that this judgment is strongly normalizing and that it  satisfies the
\emph{structural properties} \emph{contraction} and \emph{exchange}. To achieve this,
we need to choose some dictionary implementation to use for environments,
which will be used as a parameter to the evaluation judgment and as a data component in closure results.
In this section we show that \dds{} are a suitable choice, but that all the conventional solutions fail.

\rkc{Formatting:}
For \sal{}s, \emph{contraction} is false --
\altEvalEnv{\hbox{E ,, (n , v') ,, (n , v)}}{\hbox{$\cdot\lambda x \cdot e$}}{\hbox{[E ,, (n , v') ,, (n , v)]$\lambda x \cdot e$}}
while \altEvalEnv{E ,, (n , v)}{\hbox{$\cdot\lambda x \cdot e$}}{\hbox{[E ,, (n , v)]$\lambda x \cdot e$}}, yet
\hbox{[E ,, (n , v') ,, (n , v)]$\lambda x \cdot e$}$~\ne~$\hbox{[E ,, (n , v)]$\lambda x \cdot e$}.
A similar problem occurs for \emph{exchange}, so it is also false.
In order for \emph{contraction} and \emph{exchange} to be true for any system with closure results,
the dictionary implementation used for closures must be \extensional.

\Cals{} must be packaged with validity proofs wherever they go, including in the closure result.
In the validity proposition \texttt{valid : dict -> Set}, the dictionary object is in negative position,
and in our case the dictionary type is dependent on the result datatype,
so \texttt{utlc-result} is also in negative position, violating strict positivity.
As such, results cannot contain validity proofs, so for any system that uses dictionaries as data,
the dictionaries must be \total.

Because \fpf{}s do not have \EqDec, it is not possible to decide which \texttt{EvalAsrt} constructor would
apply to an \texttt{assert} of two \fpf{}s. As such, it is not possible to constructively prove strong normalization.

Because \dds, uniquely amongst the surveyed solutions, possess \SemTot, \SemInj, and \EqDec,
they are a suitable choice for implementing environments, enabling proofs of \emph{contraction},
\emph{exchange}, and strong normalization.

